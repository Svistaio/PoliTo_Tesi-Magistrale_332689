
% !TEX root = ../Testa/Principale.tex

%\begingroup Tipografia
    \newcommand\dimTesto[1]{%
        \pgfmathparse{#1*1.2}%
        \fontsize{#1 pt}{\pgfmathresult pt}\selectfont%
    }

    \newcommand\daRivedere{{\color[HTML]{DC143C}\{§\}}}
    \newcommand\dubbio{{\color[HTML]{DC143C}\{?\}}}

    \newcommand\tref[2]{\hyperref[#1]{#2}}
%\endgroup

%\begingroup Citazioni
    \newcommand\etal{\textit{et al.}}

    % Comando per definire citazioni con note separate da un punto e virgola: [citazione1, nota1; citazione2, nota2; ecc.]
    \DeclareMultiCiteCommand{\bracketcitesemi}[\mkbibbrackets]{\cite}{\addsemicolon\space}
 
    \crefname{equation}{}{}
    \crefrangeformat{equation}{(#3#1#4--#5#2#6)}
    \crefmultiformat{equation}{(#2#1#3}{,~#2#1#3)}{,~#2#1#3}{,~#2#1#3)}
    \crefrangemultiformat{equation}{(#3#1#4--#5#2#6}{,~#3#1#4--#5#2#6)}{,~#3#1#4--#5#2#6}{,~#3#1#4--#5#2#6)}
    
    \crefname{chapter}{Cap.}{Capp.}
    \crefrangeformat{chapter}{Capp.~#3#1#4--#5#2#6}
    \crefmultiformat{chapter}{Capp.~#2#1#3}{ e~#2#1#3}{, #2#1#3}{ e~#2#1#3}
    \crefrangemultiformat{chapter}{Capp.~#3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}{, #3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}
    
    \crefname{section}{§}{§§}
    \crefrangeformat{section}{§§~#3#1#4--#5#2#6}
    \crefmultiformat{section}{§§~#2#1#3}{ e~#2#1#3}{, #2#1#3}{ e~#2#1#3}
    \crefrangemultiformat{section}{§§~#3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}{, #3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}
    
    \crefname{figure}{Fig.}{Figg.}
    \crefrangeformat{figure}{Figg.~#3#1#4--#5#2#6}
    \crefmultiformat{figure}{Figg.~#2#1#3}{ e~#2#1#3}{, #2#1#3}{ e~#2#1#3}
    \crefrangemultiformat{figure}{Figg.~#3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}{, #3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}
    
    \crefname{table}{Tab.}{Tabb.}
    \crefrangeformat{table}{Tabb.~#3#1#4--#5#2#6}
    \crefmultiformat{table}{Tabb.~#2#1#3}{ e~#2#1#3}{, #2#1#3}{ e~#2#1#3}
    \crefrangemultiformat{table}{Tabb.~#3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}{, #3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}

    \crefname{algorithm}{Alg.}{Algg.}
    \crefrangeformat{figure}{Algg.~#3#1#4--#5#2#6}
    \crefmultiformat{figure}{Algg.~#2#1#3}{ e~#2#1#3}{, #2#1#3}{ e~#2#1#3}
    \crefrangemultiformat{figure}{Algg.~#3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}{, #3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}
    
    \crefname{prp}{Prop.}{Propp.}
    \crefrangeformat{prp}{Propp.~#3#1#4--#5#2#6}
    \crefmultiformat{prp}{Propp.~#2#1#3}{ e~#2#1#3}{, #2#1#3}{ e~#2#1#3}
    \crefrangemultiformat{prp}{Propp.~#3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}{, #3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}

    \crefname{dfn}{Def.}{Deff.}
    \crefrangeformat{dfn}{Deff.~#3#1#4--#5#2#6}
    \crefmultiformat{dfn}{Deff.~#2#1#3}{ e~#2#1#3}{, #2#1#3}{ e~#2#1#3}
    \crefrangemultiformat{dfn}{Deff.~#3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}{, #3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}

    \crefname{oss}{Oss.}{Oss.ni}
    \crefrangeformat{oss}{Oss.ni~#3#1#4--#5#2#6}
    \crefmultiformat{oss}{Oss.ni~#2#1#3}{ e~#2#1#3}{, #2#1#3}{ e~#2#1#3}
    \crefrangemultiformat{oss}{Oss.ni~#3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}{, #3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}
    % https://www.treccani.it/magazine/lingua_italiana/domande_e_risposte/grammatica/grammatica_123.html

    \crefname{teo}{Teo.}{Teo.ri}
    \crefrangeformat{teo}{Teo.ri~#3#1#4--#5#2#6}
    \crefmultiformat{teo}{Teo.ri~#2#1#3}{ e~#2#1#3}{, #2#1#3}{ e~#2#1#3}
    \crefrangemultiformat{teo}{Teo.ri~#3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}{, #3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}

    \crefname{ipo}{Ip.}{Ipp.}
    \crefrangeformat{ipo}{Ipp.~#3#1#4--#5#2#6}
    \crefmultiformat{ipo}{Ipp.~#2#1#3}{ e~#2#1#3}{, #2#1#3}{ e~#2#1#3}
    \crefrangemultiformat{ipo}{Ipp.~#3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}{, #3#1#4--#5#2#6}{ e~#3#1#4--#5#2#6}
%\endgroup

%\begingroup TikZ
    \newcommand\didascalia[2]{%
        \captionsetup{width=#2} % aboveskip=-.2cm,
        \caption{#1}%
    }
    
    \newcommand\sottoDidascalia[2][ ]{%
        \refstepcounter{subfigure}%
        (\thesubfigure)#1#2%
    }
    
    \makeatletter
        \newcommand\tikzfigure{\@ifstar{\tikzfigure@star}{\tikzfigure@nostar}}
        
        \newcommand\tikzfigure@nostar[6]{%
            \begin{figure}[#1]%
                \centering%
                \IfSubStr{#1}{p}{% Se p è all'interno delle opzioni della figura, allora questa è centrata rispetto alla pagina e non al corpo del testo definito da ArsClassica
                    \leavevmode% Forza la modalità orizzontale cosí da far leggere a «zref» la corretta linea d'inizio
                    \stepcounter{figposcount}%
                    \zsaveposx{figpos-\thefigposcount}%
                    \makebox[0pt][l]{%
                        % Muove indietro il cursore del testo fino al lato sinistro del foglio
                        \hspace*{-\dimexpr\zposx{figpos-\thefigposcount}sp\relax}%
                        % Muove avanti il cursore del testo fino al centro del foglio
                        \hspace*{0.5\paperwidth}%
                        % Centra la figura TikZ riseptto a questo punto
                        \makebox[0pt][c]{%
                            \begin{minipage}{#2}%
                                \centering
                                \addtocounter{figure}{1}%
                                \setcounter{subfigure}{0}%
                                \resizebox{\linewidth}{!}{#3}%
                                \addtocounter{figure}{-1}%
                                \didascalia{#4}{#5}%
                                \label{#6}%
                            \end{minipage}%
                        }%
                    }%
                }{% Altrimenti centra la figura rispetto al corpo del testo
                    \makebox[\textwidth][c]{%
                        \begin{minipage}{#2}%
                            \centering
                            \addtocounter{figure}{1}%
                            \setcounter{subfigure}{0}%
                            \resizebox{\linewidth}{!}{#3}%
                            \addtocounter{figure}{-1}%
                            \didascalia{#4}{#5}%
                            \label{#6}%
                        \end{minipage}%
                    }%
                }% Cosa che non richiede l'uso del pacchetto «zref»
            \end{figure}%
        }
        \newcommand\tikzfigure@star[5]{%
            \begin{figure}[#1]%
                \centering%
                \IfSubStr{#1}{p}{% Se p è all'interno delle opzioni della figura, allora questa è centrata rispetto alla pagina e non al corpo del testo definito da ArsClassica
                    \leavevmode% Forza la modalità orizzontale cosí da far leggere a «zref» la corretta linea d'inizio
                    \stepcounter{figposcount}%
                    \zsaveposx{figpos-\thefigposcount}%
                    \makebox[0pt][l]{%
                        % Muove indietro il cursore del testo fino al lato sinistro del foglio
                        \hspace*{-\dimexpr\zposx{figpos-\thefigposcount}sp\relax}%
                        % Muove avanti il cursore del testo fino al centro del foglio
                        \hspace*{0.5\paperwidth}%
                        % Centra la figura TikZ riseptto a questo punto
                        \makebox[0pt][c]{%
                            \begin{minipage}{\linewidth}%
                                \centering
                                \addtocounter{figure}{1}%
                                \setcounter{subfigure}{0}%
                                #2%
                                \addtocounter{figure}{-1}%
                                \didascalia{#3}{#4}%
                                \label{#5}%
                            \end{minipage}%
                        }%
                    }%
                }{% Altrimenti centra la figura rispetto al corpo del testo
                    \makebox[\textwidth][c]{%
                        \begin{minipage}{\linewidth}%
                            \centering
                            \addtocounter{figure}{1}%
                            \setcounter{subfigure}{0}%
                            #2%
                            \addtocounter{figure}{-1}%
                            \didascalia{#3}{#4}%
                            \label{#5}%
                        \end{minipage}%
                    }%
                }% Cosa che non richiede l'uso del pacchetto «zref»
            \end{figure}%
        }
    \makeatother

    \newcommand\redefineTikZbounds[2]{
        % Salva le coordinate della cima e del fondo della figura corrente (cosí da mantenere i titoli e le didascalie)
        \coordinate (Cima) at (current bounding box.north);
        \coordinate (Fondo) at (current bounding box.south);

        \pgfresetboundingbox % Resetta la scatola dei limiti

        \useasboundingbox % Definisce la nuova scatola come un rettangolo
            (#1.west |- Cima)   % con ascissa sinistra data da «Col1 c1r1.west», 
            rectangle           % ascissa destra data da «Col2 c1r1.east»
            (#2.east |- Fondo); % ordinate date dalla cima e fondo originali
            % L'operatore «|-» in «(A |- B)» prende come ascissa quella del punto A mentre come coordinata quella del punto B
    }
%\endgroup

%\begingroup Liste
    \setlist[enumerate]{
        topsep=0.5em,
        parsep=0em,
        itemsep=0.25em,
        leftmargin=2em,
        rightmargin=1.5em,
        % \leftmargin + \itemindent = \labelindent + \labelwidth + \labelsep
        %itemindent=!,
        %labelindent=30pt,
        %labelwidth=!,
        %labelsep=!,
    }

    \setlist[itemize]{
        topsep=0.5em,
        parsep=0em,
        itemsep=0.25em,
        leftmargin=2em,
        rightmargin=1.5em,
        % \leftmargin + \itemindent = \labelindent + \labelwidth + \labelsep
        %itemindent=!,
        labelindent=30pt,
        %labelwidth=!,
        %labelsep=!,
    }
%\endgroup

%\begingroup Algoritmi
    \SetKwIF{Sea}{AltSe}{Altrimenti}{se}{allora}{altrimenti se}{altrimenti}{fine se}
    \SetKwInput{KwDati}{Dati}
    \SetKwFor{Per}{per}{fai}{fine per}
    \SetKwRepeat{Ripeti}{ripeti}{finché}

    \newcommand\pythoncommfont[1]{\footnotesize\ttfamily\textcolor{gray}{#1}}
    \SetCommentSty{pythoncommfont}
    \SetKwComment{tcp}{\# }{}
%\endgroup

%\begingroup Matematica
    \numberwithin{equation}{chapter}
    \numberwithin{figure}{chapter}
    \numberwithin{table}{chapter}

    \newcommand\SpazMate[3]{ % Spaz[iatura] Mate[matica]
        \thinmuskip = #1mu\relax
        \medmuskip = #2mu\relax
        \thickmuskip = #3mu\relax
    }
    \SpazMate123

    \newcommand\de[1][]{\mathrm{d}#1}
    \newcommand\derS[3][d]{\frac{\mathrm{#1}#2}{\mathrm{#1}#3}}
    \newcommand\derP[2]{\frac{\partial#1}{\partial#2}}
    
    \DeclareMathOperator\DstrLognormale{Lognormale}
    \DeclareMathOperator\DstrBernoulli{Bernoulli}
    \DeclareMathOperator\DstrEsponenziale{Exp}
    \DeclareMathOperator\DstrGamma{Gamma}

    % \newcommand\independent{\perp\!\!\!\!\!\!\!\!\!\!\perp}
    \newcommand\independent{\perp\hspace{-.5em}\perp}

    % \newcommand\sepEnv{0.5em}
    % \mdfdefinestyle{ars_style}{
    %     linecolor=gray!40,
    %     linewidth=0.5pt,
    %     roundcorner=0pt,
    %     innertopmargin=\sepEnv,
    %     innerbottommargin=\sepEnv,
    %     innerleftmargin=0pt,
    %     innerrightmargin=0pt,
    %     backgroundcolor=gray!5,
    %     skipabove=\baselineskip,
    %     skipbelow=\baselineskip
    % }

    % \newtheoremstyle{compact}
    %     {0pt}{0pt}{\itshape}{0pt}{\bfseries}
    %     {.}{5pt plus 5pt minus 5pt}{}
    % \theoremstyle{compact}

    % \newmdtheoremenv[style=ars_style]{dfn}{Definizione}[chapter]
    % \newmdtheoremenv[style=ars_style]{ipo}{Ipotesi}[chapter]
    % \newmdtheoremenv[style=ars_style]{oss}{Osservazione}[chapter]
    % \newmdtheoremenv[style=ars_style]{prt}{Proprietà}[chapter]

    % \newmdtheoremenv[style=ars_style]{prp}{Proposizione}[chapter]
    % \newmdtheoremenv[style=ars_style]{lmm}{Lemma}[chapter]
    % \newmdtheoremenv[style=ars_style]{teo}{Teorema}[chapter]
    % \newmdtheoremenv[style=ars_style]{crl}{Corollario}[chapter]

    \theoremstyle{definition}
    \newtheorem{dfn}{Definizione}[chapter]
    \newtheorem{ipo}{Ipotesi}[chapter]
    \newtheorem{oss}{Osservazione}[chapter]
    \newtheorem{prt}{Proprietà}[chapter]

    \theoremstyle{plain}
    \newtheorem{prp}{Proposizione}[chapter]
    \newtheorem{lmm}{Lemma}[chapter]
    \newtheorem{teo}{Teorema}[chapter]
    \newtheorem{crl}{Corollario}[chapter]

    \newcommand\RPlus{\mathbb R_+}
    % \newcommand\RPlusStar{\mathbb R^*_+}
    \newcommand\NPlus{\mathbb N_+}

    \makeatletter
        \newcommand\eqtag{\@ifstar{\eqtag@star}{\eqtag@nostar}}
        
        \newcounter{eqtag}
        \newcommand\eqtag@nostar[2]{%
            \begin{equation*}%
                \refstepcounter{eqtag}%
                % \def\@currentlabeltype{eqtag}%
                \protected@edef\@currentlabel{#1}%
                #2%
                \tag*{#1}%
            \end{equation*}%
        }
        \newcommand\eqtag@star[2]{%
            \begin{equation*}%
                \refstepcounter{eqtag}%
                % \def\@currentlabeltype{eqtag}%
                \protected@edef\@currentlabel{#1}%
                #2%
                \notag%
            \end{equation*}%
        }
    \makeatother

    \DeclareMathAlphabet\pazocal{OMS}{zplm}{m}{n}

    % \newcommand\underdot[1]{\underaccent{\scalebox{0.3}{\(\bullet\)}}{#1}}
    % \newcommand\underhat[1]{\underaccent{\check}{#1}}
    \newcommand\underhat[1]{\underaccent{\hat}{#1}} % Circonflesso sottoscritto
    
%\endgroup

%\begingroup Frontespizio
    \newcommand\lineaPuntallata[1][4cm]{\makebox[#1]{\dotfill}}
    \newcommand\Frontespizio{
        \begin{titlepage}
            \newgeometry{
                left=1cm,
                right=1cm,
                top=3cm,
                bottom=3.5cm
            }
            \centering
            %
            {\Huge\scshape Politecnico di Torino}\\[1cm]
            {\Large Corso di Laurea\\in Ingegneria Matematica}
            %
            \vfill
            %
            {\Large Tesi di Laurea Magistrale}\\[0.5cm]
            \parbox{.9\textwidth}{
                \centering\huge\bfseries%
                Modellizzazione della distribuzione della popolazione tra città su reti spaziali mediante la teoria cinetica dei sistemi multiagente
            }\\[1.5cm]
            \includegraphics[width=0.25\textwidth]{../../Figure/Scelte/Altro/LogoPoliTO.jpg}
            %
            \vfill
            %
            \begin{minipage}[t]{0.85\textwidth}
                \begin{flushleft}\large
                    \textbf{Relatori} \hfill \textbf{Candidato}\\
                    prof. Andrea Tosin \hfill Valerio Taralli\\
                    prof. Nome Cognome\\[0.5cm]
                    \textit{firma dei relatori} \hfill \textit{firma del candidato}\\[0.35cm]
                    \lineaPuntallata\ \hfill \\
                    \lineaPuntallata\ \hfill \lineaPuntallata
                \end{flushleft}
            \end{minipage}
            %
            \vfill
            %
            {\large Anno Accademico 2025-2026\par}
            %
            \restoregeometry
        \end{titlepage}
    }
%\endgroup

%\begingroup Dedica
    \newcommand\Dedica{
        \thispagestyle{empty}
        \phantomsection
        \pdfbookmark[1]{Dedica}{Dedica}
    
        \vspace*{3cm}
    
        \begin{center}
            \Large
            Ai miei genitori, \\
            \emph{Elisabetta} e \emph{Marco}
        \end{center}
    }
%\endgroup

%\begingroup Altro
    \newcommand\TCSMA{\hyperlink{acrTeorieCineticheSistemiMultiAgenti}{TCSMA}}
%\endgroup
